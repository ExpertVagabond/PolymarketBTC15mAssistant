<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Polymarket Signal Bot — Pricing</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #0a0a0a; color: #e0e0e0; min-height: 100vh; }

  .hero { text-align: center; padding: 60px 20px 40px; }
  .hero h1 { font-size: 2.5em; margin-bottom: 12px; background: linear-gradient(135deg, #00ff88, #0088ff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
  .hero p { color: #888; font-size: 1.1em; max-width: 600px; margin: 0 auto; }

  .pricing { display: flex; justify-content: center; gap: 24px; padding: 20px; flex-wrap: wrap; max-width: 1000px; margin: 0 auto; }

  .plan { background: #141414; border: 1px solid #222; border-radius: 16px; padding: 32px; width: 300px; position: relative; transition: border-color 0.2s; }
  .plan:hover { border-color: #444; }
  .plan.featured { border-color: #0088ff; }
  .plan.featured::before { content: "MOST POPULAR"; position: absolute; top: -12px; left: 50%; transform: translateX(-50%); background: #0088ff; color: #fff; font-size: 11px; font-weight: 700; padding: 4px 12px; border-radius: 10px; }

  .plan h2 { font-size: 1.4em; margin-bottom: 8px; }
  .plan .price { font-size: 2.2em; font-weight: 700; margin: 16px 0 8px; }
  .plan .price span { font-size: 0.4em; color: #888; font-weight: 400; }
  .plan .desc { color: #888; font-size: 0.9em; margin-bottom: 20px; }

  .plan ul { list-style: none; margin-bottom: 24px; }
  .plan li { padding: 6px 0; font-size: 0.9em; color: #ccc; }
  .plan li::before { content: "✓ "; color: #00ff88; font-weight: 700; }
  .plan li.no::before { content: "✕ "; color: #555; }
  .plan li.no { color: #555; }

  .plan .btn { display: block; text-align: center; padding: 14px; border-radius: 10px; text-decoration: none; font-weight: 600; font-size: 1em; transition: opacity 0.2s; }
  .plan .btn:hover { opacity: 0.85; }
  .btn-free { background: #222; color: #ccc; }
  .btn-basic { background: #0088ff; color: #fff; }
  .btn-pro { background: linear-gradient(135deg, #0088ff, #00ff88); color: #000; }

  .features { max-width: 800px; margin: 60px auto; padding: 0 20px; }
  .features h2 { text-align: center; margin-bottom: 30px; font-size: 1.6em; }
  .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; }
  .feature { background: #141414; border: 1px solid #1a1a1a; border-radius: 12px; padding: 20px; }
  .feature h3 { font-size: 1em; margin-bottom: 6px; color: #00ff88; }
  .feature p { font-size: 0.85em; color: #888; }

  .footer { text-align: center; padding: 40px; color: #444; font-size: 0.85em; }
  .footer a { color: #0088ff; text-decoration: none; }
</style>
</head>
<body>

<div class="hero">
  <h1>Polymarket Signal Bot</h1>
  <p>Real-time trading signals across ALL Polymarket markets — crypto, politics, sports, esports, and more.</p>
</div>

<div class="pricing">
  <div class="plan">
    <h2>Free</h2>
    <div class="price">$0<span>/mo</span></div>
    <div class="desc">Get started with basic signals</div>
    <ul>
      <li>3 markets tracked</li>
      <li>5-minute signal delay</li>
      <li>Public Telegram channel</li>
      <li>Public Discord channel</li>
      <li class="no">Full web dashboard</li>
      <li class="no">API access</li>
    </ul>
    <a class="btn btn-free" href="/">View Dashboard</a>
    <a class="btn btn-basic" href="#" onclick="event.preventDefault();startFreeTrial()" style="margin-top:8px;background:#22c55e;font-size:0.9em">Start 7-Day Pro Trial</a>
  </div>

  <div class="plan featured">
    <h2>Basic</h2>
    <div class="price">$29<span>/mo</span></div>
    <div class="desc">Full access to all signals</div>
    <ul>
      <li>All markets tracked</li>
      <li>Real-time signals</li>
      <li>Private Telegram channel</li>
      <li>Premium Discord channel</li>
      <li>Full web dashboard</li>
      <li class="no">API access</li>
    </ul>
    <a class="btn btn-basic" href="#" id="btn-basic">Subscribe — $29/mo</a>
  </div>

  <div class="plan">
    <h2>Pro</h2>
    <div class="price">$79<span>/mo</span></div>
    <div class="desc">Everything + API + priority</div>
    <ul>
      <li>All markets tracked</li>
      <li>Real-time signals</li>
      <li>Private Telegram + alerts</li>
      <li>Premium Discord + DMs</li>
      <li>Full web dashboard</li>
      <li>REST API access</li>
    </ul>
    <a class="btn btn-pro" href="#" id="btn-pro">Subscribe — $79/mo</a>
  </div>
</div>

<div class="features">
  <h2>What You Get</h2>
  <div class="features-grid">
    <div class="feature">
      <h3>All Markets</h3>
      <p>Scans every active Polymarket market — crypto, politics, sports, culture, weather, economics.</p>
    </div>
    <div class="feature">
      <h3>TA-Powered Signals</h3>
      <p>VWAP, RSI, MACD, Heiken Ashi indicators + regime detection + edge computation.</p>
    </div>
    <div class="feature">
      <h3>Multi-Platform</h3>
      <p>Get signals on Telegram, Discord, and the web dashboard. Your choice.</p>
    </div>
    <div class="feature">
      <h3>Real-Time Alerts</h3>
      <p>STRONG and GOOD signals pushed instantly. Never miss an opportunity.</p>
    </div>
    <div class="feature">
      <h3>Edge Detection</h3>
      <p>Model probability vs market price — only signals with positive edge.</p>
    </div>
    <div class="feature">
      <h3>Backtested</h3>
      <p>Continuous outcome tracking. Model accuracy, Sharpe ratio, and P&L stats available.</p>
    </div>
  </div>
</div>

<div class="footer">
  <p>Not financial advice. Use at your own risk.</p>
  <p style="margin-top:8px"><a href="/">Dashboard</a></p>
</div>

<script>
async function startCheckout(plan) {
  // First check if logged in
  try {
    const me = await fetch('/api/auth/me').then(r => r.json());
    if (!me.email) {
      const email = prompt('Enter your email to get started:');
      if (!email || !email.includes('@')) return;
      await fetch('/api/auth/login', { method: 'POST', headers: {'Content-Type':'application/json'}, body: JSON.stringify({email}) });
      alert('Check your email for a sign-in link! After signing in, come back to subscribe.');
      return;
    }
    // Logged in - create checkout session
    const res = await fetch('/api/checkout/create', {
      method: 'POST',
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify({ plan })
    });
    const data = await res.json();
    if (data.url) {
      window.location.href = data.url;
    } else if (data.error === 'stripe_not_configured') {
      alert('Payments are being set up. Try the free trial instead!');
    } else {
      alert('Error: ' + (data.message || data.error || 'unknown'));
    }
  } catch (err) {
    alert('Error: ' + err.message);
  }
}

async function startFreeTrial() {
  try {
    const me = await fetch('/api/auth/me').then(r => r.json());
    if (!me.email) {
      const email = prompt('Enter your email to start your free trial:');
      if (!email || !email.includes('@')) return;
      await fetch('/api/auth/login', { method: 'POST', headers: {'Content-Type':'application/json'}, body: JSON.stringify({email}) });
      alert('Check your email for a sign-in link! After signing in, your 7-day Pro trial will start automatically.');
      return;
    }
    const res = await fetch('/api/trial/start', { method: 'POST' });
    const data = await res.json();
    if (data.ok) {
      alert(data.message || 'Trial started!');
      window.location.href = '/';
    } else {
      alert(data.message || data.error || 'Could not start trial');
    }
  } catch (err) {
    alert('Error: ' + err.message);
  }
}

document.getElementById('btn-basic')?.addEventListener('click', (e) => { e.preventDefault(); startCheckout('basic'); });
document.getElementById('btn-pro')?.addEventListener('click', (e) => { e.preventDefault(); startCheckout('pro'); });
</script>

</body>
</html>
